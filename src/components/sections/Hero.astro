---
import Section from "./Section.astro";
import { loadTranslations, type Language } from '../../i18n/utils';

export interface Props {
  currentLanguage?: Language;
}

const { currentLanguage = 'ja' } = Astro.props;
const translations = await loadTranslations(currentLanguage);
---

<Section id="home">
<div class="relative flex flex-col items-center justify-center min-h-screen text-center overflow-hidden" id="hero">
    <!-- Video Background -->
    <video
        autoplay
        muted
        loop
        playsinline
        class="absolute top-0 left-0 w-full h-full object-cover z-0"
        id="hero-video"
    >
        <source src="/hero.mp4" type="video/mp4" />
    </video>

    <!-- Darker Overlay for better text readability -->
    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-black/70 via-black/65 to-black/75 z-10"></div>

    <!-- Content -->
    <div class="relative z-20 max-w-4xl mx-auto px-4 space-y-8">
        <!-- Semi-transparent backdrop for title -->
        <div class="bg-black/40 backdrop-blur-sm rounded-2xl p-8 md:p-10">
            <h1 class="text-5xl md:text-7xl font-black leading-tight text-white hero-title">
                <span class="block animate-fade-in-up" style="animation-delay: 0.2s">{translations.hero.title}</span>
            </h1>
        </div>

        <div class="bg-black/30 backdrop-blur-sm rounded-xl p-6 space-y-4 text-lg md:text-xl max-w-3xl mx-auto animate-fade-in-up" style="animation-delay: 0.8s">
            <p class="text-white hero-text font-medium">{translations.hero.subtitle}</p>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center pt-8 animate-fade-in-up" style="animation-delay: 1s">
            <a href="#contact" class="hero-button px-10 py-5 bg-blue-600 hover:bg-blue-700 rounded-2xl text-center text-white text-xl font-bold transition-all duration-300 hover:scale-105 backdrop-blur-sm border-2 border-blue-800">
                {translations.hero.cta}
            </a>
            <a href="#pricing" class="hero-button px-10 py-5 bg-white hover:bg-gray-100 rounded-2xl text-center text-blue-700 border-2 border-white text-xl font-bold transition-all duration-300 hover:scale-105">
                {translations.nav.pricing}
            </a>
        </div>
    </div>
</div>

<style>
    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in-up {
        opacity: 0;
        animation: fade-in-up 0.8s ease-out forwards;
    }

    /* Hero title with text stroke and strong shadow */
    .hero-title {
        text-shadow:
            /* Multiple shadows for stronger effect */
            0 0 20px rgba(0, 0, 0, 0.9),
            0 0 40px rgba(0, 0, 0, 0.8),
            0 2px 4px rgba(0, 0, 0, 0.9),
            0 4px 8px rgba(0, 0, 0, 0.7),
            2px 2px 4px rgba(0, 0, 0, 0.8),
            -2px -2px 4px rgba(0, 0, 0, 0.8);

        /* Text stroke for better definition */
        -webkit-text-stroke: 2px rgba(0, 0, 0, 0.8);
        paint-order: stroke fill;
        letter-spacing: 0.02em;
    }

    /* Subtitle with enhanced shadow */
    .hero-subtitle {
        text-shadow:
            0 0 10px rgba(0, 0, 0, 0.9),
            0 2px 4px rgba(0, 0, 0, 0.9),
            2px 2px 6px rgba(0, 0, 0, 0.7);
        -webkit-text-stroke: 1px rgba(0, 0, 0, 0.6);
        letter-spacing: 0.01em;
    }

    /* Body text with readable shadow */
    .hero-text {
        text-shadow:
            0 0 8px rgba(0, 0, 0, 0.9),
            0 2px 4px rgba(0, 0, 0, 0.8),
            1px 1px 3px rgba(0, 0, 0, 0.9);
        -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.5);
    }

    /* For better mobile readability */
    @media (max-width: 768px) {
        .hero-title {
            -webkit-text-stroke: 1.5px rgba(0, 0, 0, 0.8);
        }

        .hero-subtitle {
            -webkit-text-stroke: 0.8px rgba(0, 0, 0, 0.6);
        }

        .hero-text {
            -webkit-text-stroke: 0.3px rgba(0, 0, 0, 0.4);
        }
    }

    /* Ensure video plays smoothly on mobile */
    #hero-video {
        pointer-events: none;
    }

    /* Fallback for browsers that don't support video */
    @supports not (object-fit: cover) {
        #hero-video {
            width: 100%;
            height: 100%;
        }
    }

    /* Additional enhancement for buttons */
    .hero-button {
        box-shadow:
            0 4px 6px -1px rgba(0, 0, 0, 0.3),
            0 2px 4px -1px rgba(0, 0, 0, 0.2),
            0 0 20px rgba(0, 0, 0, 0.4);
        text-shadow:
            0 1px 2px rgba(0, 0, 0, 0.3),
            0 0 4px rgba(0, 0, 0, 0.2);
    }
</style>

<script>
    // Ensure video plays on mobile devices
    document.addEventListener('DOMContentLoaded', () => {
        const video = document.getElementById('hero-video') as HTMLVideoElement;
        if (video) {
            video.play().catch(() => {
                // Video autoplay was prevented, try to play on user interaction
                document.addEventListener('click', () => {
                    video.play();
                }, { once: true });
            });
        }
    });
</script>
</Section>