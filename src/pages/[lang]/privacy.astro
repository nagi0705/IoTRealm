---
import MainLayout from "@/layouts/MainLayout.astro";
import Section from "@/components/sections/Section.astro";
import { loadTranslations, type Language } from '../../i18n/utils';

export const prerender = true;

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'es' } },
    { params: { lang: 'zh' } },
  ];
}

const { lang } = Astro.params;
const currentLanguage = lang as Language;
const translations = await loadTranslations(currentLanguage);
const currentPath = `/${lang}/privacy`;
---

<MainLayout
  title={`${translations.privacyPolicy.title} | IoTRealm`}
  description={translations.privacyPolicy.description}
  currentLanguage={currentLanguage}
  currentPath={currentPath}
>
  <Section id="privacy">
    <div class="container mx-auto px-4 pt-40 pb-16 max-w-4xl">
      <h1 class="text-4xl font-bold mb-8 text-gray-900">{translations.privacyPolicy.title}</h1>

      <div class="prose prose-lg max-w-none">
        <p class="text-gray-600 mb-8">
          {translations.privacyPolicy.intro}
        </p>

        <p class="text-sm text-gray-500 mb-8">{translations.privacyPolicy.effectiveDate}</p>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.definition.title}</h2>
          <p class="text-gray-700">
            {translations.privacyPolicy.sections.definition.content}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.collection.title}</h2>
          <p class="text-gray-700 mb-4">{translations.privacyPolicy.sections.collection.content}</p>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            {translations.privacyPolicy.sections.collection.purposes.map((purpose: string) => (
              <li>{purpose}</li>
            ))}
          </ul>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.usage.title}</h2>
          <p class="text-gray-700 mb-4">{translations.privacyPolicy.sections.usage.content}</p>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            {translations.privacyPolicy.sections.usage.purposes.map((purpose: string) => (
              <li>{purpose}</li>
            ))}
          </ul>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.sharing.title}</h2>
          <p class="text-gray-700 mb-4">{translations.privacyPolicy.sections.sharing.content}</p>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            {translations.privacyPolicy.sections.sharing.exceptions.map((exception: string) => (
              <li>{exception}</li>
            ))}
          </ul>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.security.title}</h2>
          <p class="text-gray-700">
            {translations.privacyPolicy.sections.security.content}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.retention.title}</h2>
          <p class="text-gray-700 mb-4">
            {translations.privacyPolicy.sections.retention.content}
          </p>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            {translations.privacyPolicy.sections.retention.periods.map((period: string) => (
              <li>{period}</li>
            ))}
          </ul>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.cookies.title}</h2>
          <p class="text-gray-700">
            {translations.privacyPolicy.sections.cookies.content}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.rights.title}</h2>
          <p class="text-gray-700">
            {translations.privacyPolicy.sections.rights.content}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.minors.title}</h2>
          <p class="text-gray-700">
            {translations.privacyPolicy.sections.minors.content}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.changes.title}</h2>
          <p class="text-gray-700">
            {translations.privacyPolicy.sections.changes.content}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-bold mb-4 text-gray-900">{translations.privacyPolicy.sections.contact.title}</h2>
          <p class="text-gray-700 mb-4">
            {translations.privacyPolicy.sections.contact.content}
          </p>
          <div class="bg-gray-50 p-6 rounded-lg">
            <p class="text-gray-700">
              {translations.privacyPolicy.sections.contact.company}<br>
              {translations.privacyPolicy.sections.contact.department}<br>
              {translations.privacyPolicy.sections.contact.emailLabel}<a href={`mailto:${translations.privacyPolicy.sections.contact.email}`} class="text-blue-600 hover:underline">{translations.privacyPolicy.sections.contact.email}</a><br>
              {translations.privacyPolicy.sections.contact.formLabel}<a href={translations.privacyPolicy.sections.contact.form} target="_blank" class="text-blue-600 hover:underline">{translations.privacyPolicy.sections.contact.form}</a>
            </p>
          </div>
        </section>
      </div>
    </div>
  </Section>
</MainLayout>